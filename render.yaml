services:
  - type: web
    name: first-aid-manager
    env: node
    plan: free
    buildCommand: "npm ci"
    startCommand: "node server.js"
    autoDeploy: true
    healthCheckPath: "/api/health"
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_VERSION
        value: 18
      - key: EMAIL_PROVIDER
        value: brevo
      - key: BREVO_SENDER_EMAIL
        value: assistenza.tecnica@isokit.it
      - key: BREVO_SENDER_NAME
        value: Assistenza Tecnica ISOKIT
      - key: LOG_LEVEL
        value: info
      - key: CORS_ORIGINS
        value: https://ettoreb21.github.io
      - key: COOKIE_SECURE
        value: true
      - key: COOKIE_SAMESITE
        value: none
      - key: DB_DIALECT
        value: sqlite
      - key: DB_SQLITE_PATH
        value: /opt/render/project/src/data/materials.sqlite
      # Set as secrets in Render dashboard
      - key: BREVO_API_KEY
        sync: false
      - key: API_KEY
        sync: false
      - key: SESSION_SECRET
        sync: false
    disk:
      name: app-data
      mountPath: /opt/render/project/src/data
      sizeGB: 1